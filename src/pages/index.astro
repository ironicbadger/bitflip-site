---
import Base from "../layouts/Base.astro";
import EpisodeHero from "../components/EpisodeHero.astro";
import EpisodeCard from "../components/EpisodeCard.astro";
import { getCollection } from "astro:content";
import { getLatestEpisode, getOlderEpisodes } from "../lib/episodes";

const episodes = await getCollection("episodes");
const latest = getLatestEpisode(episodes);
const olderEpisodes = getOlderEpisodes(episodes, latest);
const { Content } = await latest.render();
---

<Base title="Bitflip.show">
  <EpisodeHero episode={latest} Content={Content} />

  <section style="margin-top: 36px;">
    <div class="section-title">Older Episodes</div>
    <div class="older-grid">
      {olderEpisodes.map((episode) => (
        <EpisodeCard episode={episode} key={episode.id} />
      ))}
    </div>
  </section>
</Base>

<style>
  .older-grid {
    display: grid;
    gap: 16px;
  }
</style>
