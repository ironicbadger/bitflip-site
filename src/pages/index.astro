---
import Base from "../layouts/Base.astro";
import fs from "node:fs";
import yaml from "yaml";

const raw = fs.readFileSync(new URL("../../config/site.yaml", import.meta.url), "utf8");
const config = yaml.parse(raw);
const subscriptions = config.subscriptions ?? [];
const iconMap = {
  rss: "<svg viewBox='0 0 24 24' aria-hidden='true'><path fill='currentColor' d='M6 17a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3Zm-1-6v3c5.52 0 10 4.48 10 10h3c0-7.18-5.82-13-13-13Zm0-6v3c8.84 0 16 7.16 16 16h3C24 12.4 14.6 3 3 3Z'/></svg>",
  apple: "<svg viewBox='0 0 24 24' aria-hidden='true'><path fill='currentColor' d='M16.5 13.5c0-1.2.7-2.1 1.7-2.6-1-1.5-2.6-1.7-3.2-1.7-1.4-.1-2.7.8-3.4.8-.7 0-1.8-.8-3-.8-1.5 0-2.9.9-3.6 2.3-1.6 2.8-.4 6.9 1.1 9.1.8 1.1 1.7 2.3 2.9 2.3 1.1 0 1.6-.7 3-0.7 1.4 0 1.8.7 3 .7 1.2 0 2-1.1 2.8-2.2.9-1.2 1.3-2.4 1.3-2.4-0.1 0-2.6-1-2.6-3.8Zm-2.3-7.1c.6-.8 1-1.9.9-3-1 0-2.1.7-2.8 1.5-.6.7-1.1 1.9-1 3 1.1.1 2.2-.6 2.9-1.5Z'/></svg>",
  spotify: "<svg viewBox='0 0 24 24' aria-hidden='true'><path fill='currentColor' d='M12 3C7 3 3 7 3 12s4 9 9 9 9-4 9-9-4-9-9-9Zm4.1 13.1c-.2.3-.6.4-.9.2-2.5-1.5-5.6-1.8-9.2-.9-.4.1-.7-.1-.8-.5-.1-.4.1-.7.5-.8 3.9-1 7.3-.6 10.1 1.1.3.2.4.6.3.9Zm1-2.4c-.2.3-.6.5-.9.3-2.9-1.8-7.3-2.3-10.7-1.2-.4.1-.8-.1-.9-.5-.1-.4.1-.8.5-.9 3.9-1.2 8.8-.6 12.1 1.4.3.2.5.6.3.9Zm.1-2.5c-3.4-2-9.1-2.2-12.4-1.2-.5.2-1-.1-1.1-.6-.2-.5.1-1 .6-1.1 3.9-1.2 10.3-1 14.3 1.4.4.2.5.8.3 1.2-.2.4-.8.5-1.2.3Z'/></svg>",
  youtube: "<svg viewBox='0 0 24 24' aria-hidden='true'><path fill='currentColor' d='M23 12s0-3.3-.4-4.8c-.2-.9-.9-1.6-1.8-1.8C19.3 5 12 5 12 5s-7.3 0-8.8.4c-.9.2-1.6.9-1.8 1.8C1 8.7 1 12 1 12s0 3.3.4 4.8c.2.9.9 1.6 1.8 1.8C4.7 19 12 19 12 19s7.3 0 8.8-.4c.9-.2 1.6-.9 1.8-1.8.4-1.5.4-4.8.4-4.8Zm-13 3V9l6 3-6 3Z'/></svg>",
};
---

<Base title="Bitflip.show — Coming Soon">
  <section class="coming card">
    <div class="coming-head">
      <div class="section-title">Coming Soon</div>
      <h1>Bitflip.show</h1>
      <p>
        The pragmatic side of infrastructure. We’re getting the studio wired,
        the feed tuned, and the first episodes out the door.
      </p>
    </div>
    <div class="subscribe">
      <div class="section-title">Subscribe</div>
      <div class="subscribe-grid">
        {subscriptions.map((item) => (
          <a class="subscribe-card" href={item.href} aria-label={item.label}>
            <span class="icon" set:html={iconMap[item.key] ?? ""} />
            <span>{item.label}</span>
          </a>
        ))}
      </div>
    </div>
  </section>
</Base>

<style>
  .coming {
    padding: 48px;
    display: grid;
    gap: 28px;
  }
  .coming h1 {
    font-family: var(--font-display);
    font-size: clamp(2.8rem, 6vw, 4.2rem);
    margin: 0 0 10px;
  }
  .coming p {
    color: var(--steel-300);
    max-width: 620px;
    line-height: 1.6;
  }
  .subscribe-grid {
    display: grid;
    gap: 16px;
    grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
  }
  .subscribe-card {
    display: grid;
    gap: 10px;
    align-items: center;
    justify-items: start;
    padding: 16px;
    border-radius: var(--radius-md);
    border: 1px solid rgba(243, 139, 18, 0.25);
    background: rgba(12, 14, 16, 0.6);
    color: var(--steel-100);
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.08em;
  }
  .subscribe-card:hover {
    border-color: rgba(243, 139, 18, 0.6);
  }
  .icon {
    width: 28px;
    height: 28px;
    color: var(--safety-500);
  }
  .icon svg {
    width: 100%;
    height: 100%;
  }
  @media (max-width: 720px) {
    .coming {
      padding: 32px;
    }
  }
</style>
